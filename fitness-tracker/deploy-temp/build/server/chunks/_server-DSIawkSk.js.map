{"version":3,"file":"_server-DSIawkSk.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/entries/_server.js"],"sourcesContent":["import { json } from \"@sveltejs/kit\";\nimport { s as statements } from \"../../../../chunks/db.js\";\nasync function GET({ url }) {\n  const limit = url.searchParams.get(\"limit\") || \"50\";\n  const startDate = url.searchParams.get(\"start_date\");\n  const endDate = url.searchParams.get(\"end_date\");\n  try {\n    let bodyMeasurements, workouts;\n    if (startDate && endDate) {\n      bodyMeasurements = statements.getBodyMeasurementsByDateRange.all({ start_date: startDate, end_date: endDate });\n      workouts = statements.getWorkoutsByDateRange.all({ start_date: startDate, end_date: endDate });\n    } else {\n      bodyMeasurements = statements.getBodyMeasurements.all(parseInt(limit));\n      workouts = statements.getWorkouts.all(parseInt(limit));\n    }\n    return json({\n      bodyMeasurements,\n      workouts\n    });\n  } catch (error) {\n    console.error(\"Error fetching data:\", error);\n    return json({ error: \"Failed to fetch data\" }, { status: 500 });\n  }\n}\nasync function POST({ request }) {\n  try {\n    const data = await request.json();\n    const results = {};\n    if (data.weight || data.body_fat_percentage || data.muscle_mass) {\n      const bodyMeasurementResult = statements.insertBodyMeasurement.run({\n        date: data.date,\n        weight: data.weight || null,\n        body_fat_percentage: data.body_fat_percentage || null,\n        muscle_mass: data.muscle_mass || null,\n        notes: data.notes || null\n      });\n      results.bodyMeasurement = { id: bodyMeasurementResult.lastInsertRowid };\n    }\n    if (data.workout_duration || data.calories_burned) {\n      const workoutResult = statements.insertWorkout.run({\n        date: data.date,\n        workout_duration: data.workout_duration || null,\n        calories_burned: data.calories_burned || null,\n        notes: data.notes || null\n      });\n      results.workout = { id: workoutResult.lastInsertRowid };\n    }\n    return json({ ...results, success: true });\n  } catch (error) {\n    console.error(\"Error creating entry:\", error);\n    return json({ error: \"Failed to create entry\" }, { status: 500 });\n  }\n}\nexport {\n  GET,\n  POST\n};\n"],"names":[],"mappings":"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"}